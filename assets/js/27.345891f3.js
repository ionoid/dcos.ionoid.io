(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{385:function(e,t,a){"use strict";a.r(t);var o=a(45),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"iot-apps-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iot-apps-deployment"}},[e._v("#")]),e._v(" IoT Apps Deployment")]),e._v(" "),a("p",[e._v("Ionoid.io makes it easy to deploy apps on IoT and Edge Linux devices, in just\nfew clicks, an App can be deployed on hundreds or thousands of devices.")]),e._v(" "),a("p",[e._v("From dashboard you can update your applications, but also if enabled, rollback\nto previous version in case of errors.")]),e._v(" "),a("h2",{attrs:{id:"apps-deployment-workflow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apps-deployment-workflow"}},[e._v("#")]),e._v(" Apps Deployment Workflow")]),e._v(" "),a("p",[e._v("When deploying "),a("a",{attrs:{href:"https://docs.ionoid.io/docs/iot-apps.html#iot-apps",target:"_blank",rel:"noopener noreferrer"}},[e._v("archive or static"),a("OutboundLink")],1),e._v(" apps there are two extra\ndeployment workflows that you can select or even combine.")]),e._v(" "),a("h3",{attrs:{id:"_1-dual-a-b-deployment-workflow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-dual-a-b-deployment-workflow"}},[e._v("#")]),e._v(" 1. Dual A/B Deployment Workflow")]),e._v(" "),a("p",[e._v("This workflow allows you to have two copies of the application stored in device\nstorage. This is known as the "),a("strong",[e._v("dual A/B")]),e._v(" workflow, where for each new\ndeployment of the application; we keep the previous one where we can rollback to\nit, in order to recover from errors, application bugs, etc.")]),e._v(" "),a("p",[e._v("Before activating this feature, please make sure you have enough space storage\non devices for the uncompressed application files. Usually if your uncompressed\napplication takes up less than 30% of the entire storage, then it should be fine.")]),e._v(" "),a("p",[e._v("By default it is disabled, to enable this feature, please see\n"),a("a",{attrs:{href:"https://docs.ionoid.io/docs/manage-projects.html#configure-the-project",target:"_blank",rel:"noopener noreferrer"}},[e._v("Project Configuration"),a("OutboundLink")],1),e._v(", then\n"),a("a",{attrs:{href:"https://docs.ionoid.io/docs/manage-projects.html#redeploy-project-settings",target:"_blank",rel:"noopener noreferrer"}},[e._v("Redeploy Project Configuration"),a("OutboundLink")],1),e._v("\noperation to redeploy the changes to devices.")]),e._v(" "),a("h3",{attrs:{id:"_2-delta-updates-workflow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-delta-updates-workflow"}},[e._v("#")]),e._v(" 2. Delta Updates Workflow")]),e._v(" "),a("p",[e._v("The "),a("strong",[e._v("delta update")]),e._v(" workflow is an update mechanism for applications that only\nrequires the user to download the code that has changed, not the whole program.\nIt can significantly save time and bandwidth.")]),e._v(" "),a("p",[e._v("An app can be updated faster and more efficiently due to this mechanism, as an\nexample: a packaged archive app that is 100 megabytes will be updated with new\nfiles that add an additional two megabytes to the application's size, in this\ncase only two megabytes will be downloaded instead of 102 megabytes.")]),e._v(" "),a("p",[e._v("Ionoid.io uses the "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/VCDIFF",target:"_blank",rel:"noopener noreferrer"}},[e._v("VCDIFF format"),a("OutboundLink")],1),e._v(" to\nperform delta encoding and updates, the full specification can be found in\n"),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc3284",target:"_blank",rel:"noopener noreferrer"}},[e._v("IETF's RFC 3284: The VCDIFF Generic Differencing and Compression Data\nFormat"),a("OutboundLink")],1),e._v(". The open source project\n"),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Xdelta",target:"_blank",rel:"noopener noreferrer"}},[e._v("xdelta version 3"),a("OutboundLink")],1),e._v(" is used to handle delta\nencoding.")]),e._v(" "),a("p",[e._v("By default, delta updates option is disabled, and app deployment is performed\nusing the full application package. To enable this feature, please see\n"),a("a",{attrs:{href:"https://docs.ionoid.io/docs/manage-projects.html#configure-the-project",target:"_blank",rel:"noopener noreferrer"}},[e._v("Project configuration"),a("OutboundLink")],1),e._v(", then\n"),a("a",{attrs:{href:"https://docs.ionoid.io/docs/manage-projects.html#redeploy-project-settings",target:"_blank",rel:"noopener noreferrer"}},[e._v("Redeploy project configuration"),a("OutboundLink")],1),e._v("\noperation to redeploy the changes to devices. See "),a("a",{attrs:{href:"#delta-updates-example"}},[e._v("Delta Updates Example")]),e._v(" for more details.")]),e._v(" "),a("h2",{attrs:{id:"deploy-apps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-apps"}},[e._v("#")]),e._v(" Deploy Apps")]),e._v(" "),a("p",[e._v("In the next sections, we consider that you have:")]),e._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/docs/getting-started.html"}},[e._v("Created")]),e._v(" an account on Ionoid.io")],1),e._v(" "),a("li",[a("RouterLink",{attrs:{to:"/docs/manage-projects.html"}},[e._v("Created")]),e._v(" at least one project")],1),e._v(" "),a("li",[a("RouterLink",{attrs:{to:"/docs/register-devices.html"}},[e._v("Registered")]),e._v(" at least one device on this project")],1)]),e._v(" "),a("p",[e._v("If not, please follow the guidelines on the links above then return to this page.")]),e._v(" "),a("p",[e._v("The dashboard provides a way to deploy on a subset of devices, using filters\nbased on device names (for example, deploy only on devices\nwith names matching "),a("code",[e._v("weather-station-*")]),e._v("), or devices with a specific status\n(for example device with status "),a("code",[e._v("error")]),e._v(" to fix a bug).")]),e._v(" "),a("p",[e._v("To deploy an IoT app you have three options:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#deploy-on-a-single-device"}},[e._v("Deploy on a single device")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#deploy-on-all-devices-of-a-project"}},[e._v("Deploy on all devices of a project")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#deploy-on-a-subset-of-devices-of-a-project"}},[e._v("Deploy on a subset of devices of a\nproject")])])]),e._v(" "),a("h3",{attrs:{id:"deploy-on-a-single-device"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-on-a-single-device"}},[e._v("#")]),e._v(" Deploy on a Single Device")]),e._v(" "),a("p",[e._v("In this example we assume that the deployed applications are "),a("code",[e._v("archive")]),e._v(" or "),a("code",[e._v("static")]),e._v(" apps, deploying docker applications\nis same except that we use docker urls.")]),e._v(" "),a("ul",[a("li",[e._v("On "),a("the-device-details-page"),e._v(", click on the "),a("strong",[e._v("︙")]),e._v(" button and choose\n"),a("strong",[e._v("Deploy app on this device")]),e._v(" action:")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/go_to_device_details_page_click_on_deploy_app.gif",alt:"Click on Deploy App Button"}})]),e._v(" "),a("ul",[a("li",[a("p",[e._v("On the window that appears, you can optionally add/remove environment variables\nfor this app")])]),e._v(" "),a("li",[a("p",[e._v("Paste a public accessible URL to your app, and click on the "),a("strong",[e._v("Deploy")]),e._v(" button")])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("If you have not yet an app on hand, you can test our "),a("strong",[e._v("Hello World")]),e._v(" test app,\nfor that, use "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv6/hello-world/hello-world-armv6-v0.1.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("this public URL for ARMv6 devices"),a("OutboundLink")],1),e._v(", and "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv7/hello-world/hello-world-armv7-v0.1.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("this public URL for ARMv7 devices"),a("OutboundLink")],1),e._v(" to deploy the version "),a("code",[e._v("v0.1")]),e._v(".")])]),e._v(" "),a("p",[e._v("After few seconds, you will receive realtime messages about the status and\nprogress of the app deployment on the device.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/on_device_details_page_paste_app_url_and_wait_realtime_messages.gif",alt:"Paste the App Public URL"}})]),e._v(" "),a("p",[e._v("Once the app deployed on this device, you can see it listed on\n"),a("the-project-app-list-page"),e._v(" or on "),a("the-device-app-list-page"),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"deploy-on-all-devices-of-a-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-on-all-devices-of-a-project"}},[e._v("#")]),e._v(" Deploy on All Devices of a Project")]),e._v(" "),a("ul",[a("li",[e._v("On "),a("the-project-details-page"),e._v(" make sure that no device is selected. Click on\n"),a("strong",[e._v("︙")]),e._v(" button and choose "),a("strong",[e._v("Deploy app on all devices")]),e._v(" action:")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/on_project_details_page_unselect_all_devices_and_click_on_deploy_on_all_devices.gif",alt:"Click on Deploy App on All Devices"}})]),e._v(" "),a("ul",[a("li",[a("p",[e._v("On the window that appears, you can optionally add/remove environment variables\nfor this app.")])]),e._v(" "),a("li",[a("p",[e._v("Paste a public accessible URL to your app, and click on the "),a("strong",[e._v("Deploy")]),e._v(" button")])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("If you have not yet an app on hand, you can test our "),a("strong",[e._v("Hello World")]),e._v(" test app,\nfor that, use "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv6/hello-world/hello-world-armv6-v0.1.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("this public URL for ARMv6 devices"),a("OutboundLink")],1),e._v(", and "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv7/hello-world/hello-world-armv7-v0.1.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("this public URL for ARMv7 devices"),a("OutboundLink")],1),e._v(" to deploy the version "),a("code",[e._v("v0.1")]),e._v(".")])]),e._v(" "),a("p",[e._v("After few seconds, you will receive realtime messages about the status and\nprogress of the app deployment on each device.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/deploy_app_on_all_devices_of_project.gif",alt:"Deploy App on All Devices of a Project"}})]),e._v(" "),a("p",[e._v("Once the app deployed on at least one device of the project, you can see it\nlisted on "),a("the-project-app-list-page"),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"deploy-on-a-subset-of-devices-of-a-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-on-a-subset-of-devices-of-a-project"}},[e._v("#")]),e._v(" Deploy on a Subset of Devices of a Project")]),e._v(" "),a("ul",[a("li",[e._v("On "),a("the-project-details-page"),e._v(", select the device(s) you want to deploy to")],1)]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("If you don't select any device, the deployment will concern all the devices of the\ncurrent project.")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Click on the "),a("strong",[e._v("︙")]),e._v(" button, and choose the "),a("strong",[e._v("Deploy app")]),e._v(" action")])]),e._v(" "),a("li",[a("p",[e._v("Optionally, remove/add environment variables this app needs to properly work")])]),e._v(" "),a("li",[a("p",[e._v("Paste a public accessible URL to your app, and click on the "),a("strong",[e._v("Deploy")]),e._v(" button")])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("If you have not yet an app on hand, you can test our "),a("strong",[e._v("Hello World")]),e._v(" test app,\nfor that, use "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv6/hello-world/hello-world-armv6-v0.1.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("this public URL for ARMv6 devices"),a("OutboundLink")],1),e._v(", and "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv7/hello-world/hello-world-armv7-v0.1.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("this public URL for ARMv7 devices"),a("OutboundLink")],1),e._v(" to deploy the version "),a("code",[e._v("v0.1")]),e._v(".")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/deploy_app_on_some_devices_of_project.gif",alt:"Deploy App on Selected Devices"}})]),e._v(" "),a("p",[e._v("After few seconds, you will receive realtime messages about the status and\nprogress of the app deployment on each device.")]),e._v(" "),a("p",[e._v("Once the app deployed on at least one device of the project, you can see it\nlisted on "),a("the-project-app-list-page"),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"predeployed-applications"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#predeployed-applications"}},[e._v("#")]),e._v(" Predeployed Applications")]),e._v(" "),a("p",[e._v("There are cases where the applications should be packed with OS image, installed\nthen run on first boot. This is supported by copying the application into the\n"),a("code",[e._v("/data/")]),e._v(" partition, inside directory "),a("code",[e._v("/data/apps/archive/")]),e._v(". The directory has\nto be created in first place by the user, before booting the image.")]),e._v(" "),a("p",[e._v("Example assuming mounted data storage is at "),a("code",[e._v("/mnt/data/")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" -p /mnt/data/apps/archive/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" my-app-v1.tar.gz /mnt/data/apps/archive/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sync")]),e._v(" /mnt/data/apps/archive/my-app-v1.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("umount")]),e._v(" /mnt/data/apps\n")])])]),a("p",[e._v("When devices are booted, the directory "),a("code",[e._v("/data/apps/archive/")]),e._v(" will be checked\nevery 10 minutes to 15 minutes, all applications inside will be installed. After\ntrigerring the installation, the corresponding applications packages are removed.")]),e._v(" "),a("h2",{attrs:{id:"update-apps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-apps"}},[e._v("#")]),e._v(" Update Apps")]),e._v(" "),a("p",[e._v("You can easily update an already deployed app to a newer version, for that you\nhave three options:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#update-on-a-single-device"}},[e._v("Update on a single device")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#update-on-all-devices-of-a-project"}},[e._v("Update on all devices of a project")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#update-on-a-subset-of-devices-of-a-project"}},[e._v("Update on a subset of devices of a\nproject")])])]),e._v(" "),a("h3",{attrs:{id:"update-on-a-single-device"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-on-a-single-device"}},[e._v("#")]),e._v(" Update on a Single Device")]),e._v(" "),a("ul",[a("li",[e._v("On "),a("the-device-app-details-page"),e._v(", click on the "),a("strong",[e._v("︙")]),e._v(" button, and\nchoose "),a("strong",[e._v("Update app on this device")])],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/click_on_update_app_on_this_device.png",alt:"Click on Update App on this Device"}})]),e._v(" "),a("ul",[a("li",[e._v("You will get the same window as in the first deploy step, however\nwith the previous public URL pasted. Follow the same steps as in the first\ndeploy process, and after few seconds, you will receive realtime messages about\nthe status and progress of the app deployment on this device.")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can use the same public URL to deploy multiple versions of the same app.\nThis is why for convenience, the previous public URL has been pasted to\ndeployment field.")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("If you used our "),a("strong",[e._v("Hello World")]),e._v(" "),a("code",[e._v("v0.1")]),e._v(" test app on the first deploy, you can\nnow use its "),a("code",[e._v("v0.2")]),e._v(" version to test update. Here is the "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv6/hello-world/hello-world-armv6-v0.2.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("public URL for ARMv6 devices"),a("OutboundLink")],1),e._v(", and "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv7/hello-world/hello-world-armv7-v0.2.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("the public URL for ARMv7 devices"),a("OutboundLink")],1),e._v(" to deploy the version "),a("code",[e._v("v0.1")]),e._v(".")])]),e._v(" "),a("h3",{attrs:{id:"update-on-all-devices-of-a-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-on-all-devices-of-a-project"}},[e._v("#")]),e._v(" Update on All Devices of a Project")]),e._v(" "),a("ul",[a("li",[e._v("On "),a("the-project-app-details-page"),e._v(", click on the "),a("strong",[e._v("︙")]),e._v(" button, then\nclick on the "),a("strong",[e._v("Update app on all devices")]),e._v(" button:")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/click_on_update_app_on_all_devices.gif",alt:"Click on Update App on all Devices"}})]),e._v(" "),a("ul",[a("li",[e._v("You will get the same window as in the first deploy step, however\nwith the previous public URL pasted. Follow the same steps as in the first\ndeploy process, and after few seconds, you will receive realtime messages about\nthe status and progress of the app deployment on devices of the project.")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can use the same public URL to deploy multiple versions of the same app.\nThis is why for convenience, the previous public URL has been pasted to\ndeployment field.")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("If you used our "),a("strong",[e._v("Hello World")]),e._v(" "),a("code",[e._v("v0.1")]),e._v(" test app on the first deploy, you can\nnow use its "),a("code",[e._v("v0.2")]),e._v(" version to test update. Here is the "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv6/hello-world/hello-world-armv6-v0.2.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("public URL for ARMv6 devices"),a("OutboundLink")],1),e._v(", and "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv7/hello-world/hello-world-armv7-v0.2.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("the public URL for ARMv7 devices"),a("OutboundLink")],1),e._v(" to deploy the version "),a("code",[e._v("v0.1")]),e._v(".")])]),e._v(" "),a("h3",{attrs:{id:"update-on-a-subset-of-devices-of-a-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-on-a-subset-of-devices-of-a-project"}},[e._v("#")]),e._v(" Update on a Subset of Devices of a Project")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Navigate to "),a("the-project-app-list-page"),e._v(" then click on the target app")],1)]),e._v(" "),a("li",[a("p",[e._v("Select the devices you want to update app on")])]),e._v(" "),a("li",[a("p",[e._v("Click on the "),a("strong",[e._v("︙")]),e._v(" button, then click on the "),a("strong",[e._v("Update app on selected\ndevices")]),e._v(" button:")])])]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/update_app_on_selected_devices.gif",alt:"Click on Update App on Selected Devices"}})]),e._v(" "),a("ul",[a("li",[e._v("You will get the same window as in the first deploy step, however\nwith the previous public URL pasted. Follow the same steps as in the first\ndeploy process, and after few seconds, you will receive realtime messages about\nthe status and progress of the app deployment on devices of the project.")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can use the same public URL to deploy multiple versions of the same app.\nThis is why for convenience, the previous public URL has been pasted to\ndeployment field.")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("If you used our "),a("strong",[e._v("Hello World")]),e._v(" "),a("code",[e._v("v0.1")]),e._v(" test app on the first deploy, you can\nnow use its "),a("code",[e._v("v0.2")]),e._v(" version to test update. Here is the "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv6/hello-world/hello-world-armv6-v0.2.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("public URL for ARMv6 devices"),a("OutboundLink")],1),e._v(", and "),a("a",{attrs:{href:"https://storage.googleapis.com/public.opendevices.io/apps/arch/armv7/hello-world/hello-world-armv7-v0.2.tar",target:"_blank",rel:"noopener noreferrer"}},[e._v("the public URL for ARMv7 devices"),a("OutboundLink")],1),e._v(" to deploy the version "),a("code",[e._v("v0.1")]),e._v(".")])]),e._v(" "),a("h3",{attrs:{id:"delta-updates-example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delta-updates-example"}},[e._v("#")]),e._v(" Delta Updates Example")]),e._v(" "),a("p",[e._v("Let's assume that the current app version has been deployed using the package\nfile "),a("code",[e._v("my-app-1.0.0.tar.gz")]),e._v(", and that you want to deploy a new version packaged\nin file "),a("code",[e._v("my-app-2.0.0.tar.gz")]),e._v(". You will not need to upload the whole\n"),a("code",[e._v("my-app-2.0.0.tar.gz")]),e._v(" file. Instead, you will upload the "),a("em",[e._v("difference")]),e._v(" between\nthe two packages, known under the fancy name of "),a("em",[e._v("the delta")]),e._v(".")]),e._v(" "),a("p",[e._v("To generate a delta between two files you will need to install "),a("a",{attrs:{href:"https://github.com/jmacd/xdelta",target:"_blank",rel:"noopener noreferrer"}},[e._v("xdelta3"),a("OutboundLink")],1),e._v(" on your Linux working station (make sure it is\n"),a("code",[e._v("xdelta3")]),e._v(" with "),a("strong",[e._v("version 3")]),e._v("):")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# For example, in debian/ubuntu based distributions:")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" xdelta3\n")])])]),a("p",[e._v("The steps to perform a delta update are the following:")]),e._v(" "),a("ol",[a("li",[e._v("Produce a delta file named "),a("code",[e._v("app.xdelta")]),e._v(" between "),a("code",[e._v("my-app-1.0.0.tar.gz")]),e._v(" and\n"),a("code",[e._v("my-app-2.0.0.tar.gz")]),e._v(" using "),a("code",[e._v("xdelta3")]),e._v(":")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("xdelta3 -e -s my-app-1.0.0.tar.gz my-app-2.0.0.tar.gz app.xdelta\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Host the generated "),a("code",[e._v("app.xdelta")]),e._v(" file somewhere such that it must be inside a\nfolder named "),a("code",[e._v("1.0.0")]),e._v(", the full URL will be, for example:")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("https://example.com/software/my-app/1.0.0/app.xdelta\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("N. B.")]),e._v(" "),a("ul",[a("li",[e._v("The current deployed version on device is read from the "),a("a",{attrs:{href:"https://docs.ionoid.io/docs/iot-apps.html#app-yaml-format",target:"_blank",rel:"noopener noreferrer"}},[e._v("app.yaml\nfile"),a("OutboundLink")],1),e._v(" in package\nfile "),a("code",[e._v("my-app-1.0.0.tar.gz")]),e._v(" present on the device, not from the package filename\nitself, which can just as well be named, say, "),a("code",[e._v("my-app-first-version.tar.gz")]),e._v(".")]),e._v(" "),a("li",[e._v("The file "),a("strong",[e._v("must be")]),e._v(" named "),a("code",[e._v("app.xdelta")]),e._v(" and the folder "),a("strong",[e._v("must be")]),e._v(" named "),a("code",[e._v("1.0.0")]),e._v(".")])])]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("Perform the delta update by navigating to "),a("the-project-app-details-page"),e._v(" or\n"),a("the-device-app-details-page"),e._v(", then on the actions menu, click on "),a("strong",[e._v("Update app\non all/selected/current device(s)")]),e._v(", make sure that "),a("strong",[e._v("Delta Update")]),e._v(" is enabled\nand paste the following "),a("em",[e._v("delta base URL")]),e._v(" "),a("code",[e._v("https://example.com/software/my-app/")]),e._v(":")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/delta_update_app_on_devices.png",alt:"Paste Delta Update URL"}})]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("N. B.")]),e._v(" "),a("p",[e._v("This is the "),a("strong",[e._v("delta base URL")]),e._v(" that must be filled (without the "),a("code",[e._v("1.0.0/app.xdelta")]),e._v(")\nand not the "),a("strong",[e._v("full URL")]),e._v(". Passing the full URL will result in a failure.")])]),e._v(" "),a("p",[e._v("This instructs the device to:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Get the current version of the app from the local "),a("a",{attrs:{href:"https://docs.ionoid.io/docs/iot-apps.html#app-yaml-format",target:"_blank",rel:"noopener noreferrer"}},[e._v("app.yaml\nfile"),a("OutboundLink")],1),e._v(", in this case\n"),a("code",[e._v("1.0.0")]),e._v(".")])]),e._v(" "),a("li",[a("p",[e._v("Use the current version to construct the final URL by appending\n"),a("code",[e._v("1.0.0/app.xdelta")]),e._v(" to the delta base URL, to finally produce:")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("https://example.com/software/my-app/1.0.0/app.xdelta\n")])])]),a("ul",[a("li",[e._v("Download the delta file and patch the current packaged version.")])]),e._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[e._v("Question: Why should I provide the delta base URL and not the full delta URL")]),e._v(" "),a("p",[e._v("Even if it does not seem to be logical in the previous simple case to provide the\ndelta base URL "),a("code",[e._v("https://example.com/software/my-app/")]),e._v(" instead of the full URL,\nthis convention will prove useful when deploying multiple delta updates\nfor multiple different obsolete versions.")]),e._v(" "),a("p",[e._v("Suppose you have "),a("code",[e._v("my-app")]),e._v(" deployed on 10 devices, you regularly deploy updates of\nthis app to keep it up to date. But due to connectivity issues, some devices\nstill have an obsolete version of the app (latest version is 10.0.0):")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("Device A")]),e._v(": has version 5.0.0")]),e._v(" "),a("li",[a("strong",[e._v("Device B")]),e._v(": has version 7.0.0")]),e._v(" "),a("li",[a("strong",[e._v("Device C")]),e._v(": has version 9.0.0")])]),e._v(" "),a("p",[e._v("All remaining devices have version 10.0.0. You will not have to update each\ndevice individually. Instead, prepare 3 delta files:")]),e._v(" "),a("ul",[a("li",[e._v("A first one for passage from 5.0.0 to 10.0.0")]),e._v(" "),a("li",[e._v("A second one for passage from 7.0.0 to 10.0.0")]),e._v(" "),a("li",[e._v("A third one for passage from 9.0.0 to 10.0.0")])]),e._v(" "),a("p",[e._v("All delta files need to be named "),a("code",[e._v("app.xdelta")]),e._v(", but each of them must be put\ninside a folder named with the starting version, thus:")]),e._v(" "),a("ul",[a("li",[e._v("The first delta update must be put in folder "),a("code",[e._v("5.0.0/")])]),e._v(" "),a("li",[e._v("The second delta update must be put in folder "),a("code",[e._v("7.0.0/")])]),e._v(" "),a("li",[e._v("The third delta update must be put in folder "),a("code",[e._v("9.0.0/")])])]),e._v(" "),a("p",[e._v("So, folder structure at the "),a("code",[e._v("my-app")]),e._v(" level must be:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("my-app\n├── 5.0.0\n│   └── app.xdelta # represents transition from 5.0.0. to 10.0.0\n├── 7.0.0\n│   └── app.xdelta # represents transition from 7.0.0. to 10.0.0\n└── 9.0.0\n    └── app.xdelta # represents transition from 9.0.0. to 10.0.0\n")])])]),a("p",[e._v("Then, all what you need to do is to visit "),a("the-project-app-details-page"),e._v(",\nand choose "),a("strong",[e._v("Update app on all devices")]),e._v(", then you paste the delta base URL\n"),a("code",[e._v("https://example.com/software/my-app/")]),e._v(". Each device will go and look at path\n"),a("code",[e._v("CURRENT_VERSION/app.xdelta")]),e._v(" in the delta base URL based on the "),a("code",[e._v("CURRENT_VERSION")]),e._v("\nof the app installed on it, then download the delta file and patch app package\nwith it:")],1),e._v(" "),a("ul",[a("li",[a("strong",[e._v("Device A")]),e._v(": will read local version "),a("code",[e._v("5.0.0")]),e._v(" and fetch path "),a("code",[e._v("5.0.0/app.xdelta")]),e._v(" in\ndelta base URL")]),e._v(" "),a("li",[a("strong",[e._v("Device B")]),e._v(": will read local version "),a("code",[e._v("7.0.0")]),e._v(" and fetch path "),a("code",[e._v("7.0.0/app.xdelta")]),e._v(" in\ndelta base URL")]),e._v(" "),a("li",[a("strong",[e._v("Device A")]),e._v(": will read local version "),a("code",[e._v("9.0.0")]),e._v(" and fetch path "),a("code",[e._v("9.0.0/app.xdelta")]),e._v(" in\ndelta base URL")])]),e._v(" "),a("p",[e._v("Don't worry about up-to-date devices that will try to fetch "),a("code",[e._v("10.0.0/app.xdelta")]),e._v(",\nthey will simply fail to download the delta file and cancel the update. If you want\nto avoid such inoffensive errors, just select devices with outdated app version\nbefore updating app.")])]),e._v(" "),a("h2",{attrs:{id:"rollback-apps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rollback-apps"}},[e._v("#")]),e._v(" Rollback Apps")]),e._v(" "),a("p",[e._v("If you deployed an IoT app, then discovered that it is buggy (on one or more\ndevices), do not panic! You can easily rollback the app version, for that you\nhave three options:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#rollback-on-a-single-device"}},[e._v("Rollback on a single device")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#rollback-on-all-devices-of-a-project"}},[e._v("Rollback on all devices of a project")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#rollback-on-a-subset-of-devices-of-a-project"}},[e._v("Rollback on a subset of devices of a\nproject")])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("To be able to use this feature, "),a("a",{attrs:{href:"#_1-dual-a-b-deployment-workflow"}},[e._v("Dual A/B Deployment")]),e._v(" must be enabled.")])]),e._v(" "),a("h3",{attrs:{id:"rollback-on-a-single-device"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rollback-on-a-single-device"}},[e._v("#")]),e._v(" Rollback on a Single Device")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("On the top of "),a("the-device-app-details-page"),e._v(", you can check what is the current\nversion, and what is the previous version")],1)]),e._v(" "),a("li",[a("p",[e._v("Click on the "),a("strong",[e._v("︙")]),e._v(" button, and choose "),a("strong",[e._v("Rollback app on this\ndevice")])])])]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/click_on_rollback_app_on_single_device.png",alt:"Click on Rollback Device App"}})]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Confirm by clicking on the "),a("strong",[e._v("Rollback")]),e._v(" button on the confirmation window")])]),e._v(" "),a("li",[a("p",[e._v("After few seconds, you will receive realtime messages about the rollback\nprocess on the device")])])]),e._v(" "),a("h3",{attrs:{id:"rollback-on-all-devices-of-a-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rollback-on-all-devices-of-a-project"}},[e._v("#")]),e._v(" Rollback on All Devices of a Project")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("On "),a("the-project-app-details-page"),e._v(", make sure that no device is selected")],1)]),e._v(" "),a("li",[a("p",[e._v("Click on the "),a("strong",[e._v("︙")]),e._v(" button, then click on the "),a("strong",[e._v("Rollback app on all\ndevices")]),e._v(" button:")])])]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/click_on_rollback_app_on_all_devices_of_project.png",alt:"Click on Rollback Project App"}})]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Confirm by clicking on the "),a("strong",[e._v("Rollback")]),e._v(" button on the confirmation window")])]),e._v(" "),a("li",[a("p",[e._v("After few seconds, you will receive realtime messages about the rollback\nprocess on the device")])])]),e._v(" "),a("h3",{attrs:{id:"rollback-on-a-subset-of-devices-of-a-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rollback-on-a-subset-of-devices-of-a-project"}},[e._v("#")]),e._v(" Rollback on a Subset of Devices of a Project")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("On "),a("the-project-app-details-page"),e._v(", select the devices you want to update app on")],1)]),e._v(" "),a("li",[a("p",[e._v("Click on the "),a("strong",[e._v("︙")]),e._v(" button, then click on the "),a("strong",[e._v("Rollback app on\nselected devices")]),e._v(" button:")])])]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/click_on_rollback_app_on_selected_devices.png",alt:"Click on Rollback Selected Devices App"}})]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Confirm by clicking on the "),a("strong",[e._v("Rollback")]),e._v(" button on the confirmation window")])]),e._v(" "),a("li",[a("p",[e._v("After few seconds, you will receive realtime messages about the rollback\nprocess on the selected devices")])])]),e._v(" "),a("h2",{attrs:{id:"start-stop-apps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-stop-apps"}},[e._v("#")]),e._v(" Start/Stop Apps")]),e._v(" "),a("p",[e._v("You can either stop an (already running) app on all or some devices of a project,\nor on a single device:")]),e._v(" "),a("ul",[a("li",[e._v("To stop a running app on all devices of a project, navigate to "),a("the-project-app-details-page"),e._v(".\nClick on the "),a("strong",[e._v("︙")]),e._v(" button, then click on the "),a("strong",[e._v("Stop app on all devices")]),e._v(":")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/stop-app-on-all-devices.png",alt:"Click on Stop App on allDevices"}})]),e._v(" "),a("ul",[a("li",[a("p",[e._v("To start the app again, use the same menu, and click on "),a("strong",[e._v("Start app on all\ndevices")])])]),e._v(" "),a("li",[a("p",[e._v("To stop a running app on a single device, navigate to\n"),a("the-device-app-details-page")],1)]),e._v(" "),a("li",[a("p",[e._v("Click on the "),a("strong",[e._v("︙")]),e._v(" button, then click on "),a("strong",[e._v("Stop app on this device")]),e._v(":")])]),e._v(" "),a("li",[a("p",[e._v("To start the app again, use the same menu, and click on "),a("strong",[e._v("Start app on this\ndevice")])])])]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/stop-app-on-this-device.png",alt:"Click on Stop App on thisDevice"}})]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("ul",[a("li",[e._v("Starting an already running app will have the effect of restarting this app")]),e._v(" "),a("li",[e._v("When an app has been started, you don't need to start it again on the next\nreboot of the device, it will auto-start")])])]),e._v(" "),a("h2",{attrs:{id:"disable-apps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#disable-apps"}},[e._v("#")]),e._v(" Disable Apps")]),e._v(" "),a("p",[e._v("Disaling an IoT app is like "),a("a",{attrs:{href:"#start-stop-iot-apps"}},[e._v("stopping it")]),e._v(", except that it\nwill not restart the next time the device reboots. You can either disable an\napp on all, or some devices of a project, or on a single device:")]),e._v(" "),a("ul",[a("li",[e._v("To disable an app on all devices of a project, navigate to\n"),a("the-project-app-details-page"),e._v(" and click on "),a("strong",[e._v("Disable app on this project")]),e._v("\nbutton:")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/disable-app-on-this-project.png",alt:"Click on Disable App on thisProject"}})]),e._v(" "),a("ul",[a("li",[e._v("To disable an app on a single device, navigate to\n"),a("the-device-app-details-page"),e._v(". Click on the "),a("strong",[e._v("︙")]),e._v(" button, then click\non "),a("strong",[e._v("Disable app on this device")]),e._v(":")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/disable-app-on-this-device.png",alt:"Click on Disable App on thisDevice"}})]),e._v(" "),a("h2",{attrs:{id:"delete-apps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delete-apps"}},[e._v("#")]),e._v(" Delete Apps")]),e._v(" "),a("p",[e._v("You can either delete an app on all or some devices of a project, or on a single\ndevice:")]),e._v(" "),a("ul",[a("li",[e._v("To delete an app on all devices of a project, navigate to\n"),a("the-project-app-details-page"),e._v(" and click on "),a("strong",[e._v("Delete app on this project")]),e._v("\nbutton:")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/delete-app-on-this-project.png",alt:"Click on Delete App on thisProject"}})]),e._v(" "),a("ul",[a("li",[e._v("To delete an app on a single device, navigate to\n"),a("the-device-app-details-page"),e._v(". Click on the "),a("strong",[e._v("︙")]),e._v(" button, then click\non "),a("strong",[e._v("Delete app on this device")]),e._v(":")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/steps/deploy-iot-apps/delete-app-on-this-device.png",alt:"Click on Delete App on thisDevice"}})]),e._v(" "),a("Content",{attrs:{"page-key":e.getPageKey(e.$site.pages,"/docs/_have-questions.html")}})],1)}),[],!1,null,null,null);t.default=s.exports}}]);