(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{387:function(e,a,t){"use strict";t.r(a);var n=t(45),o=Object(n.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"build-linux-iot-and-edge-archive-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#build-linux-iot-and-edge-archive-apps"}},[e._v("#")]),e._v(" Build Linux IoT and Edge archive Apps")]),e._v(" "),t("p",[e._v("Ionoid.io IoT and Edge Linux apps are archive files that bundle the application,\nlibraries, files and other dependencies. Using some of\n"),t("a",{attrs:{href:"https://en.wikipedia.org/wiki/List_of_Linux_containers",target:"_blank",rel:"noopener noreferrer"}},[e._v("Linux Containers Technology"),t("OutboundLink")],1),e._v(" to implement file system\nisolation, devices are able to run multiple applications isolated from one\nanother.")]),e._v(" "),t("p",[e._v("This section describes how to build archive Linux apps that can run on any\nLinux device. To be able to deploy the archive with Ionoid.io and run it on\ndevices, the archive must then include the "),t("a",{attrs:{href:"https://docs.ionoid.io/docs/iot-apps.html#app-yaml-format",target:"_blank",rel:"noopener noreferrer"}},[e._v("app YAML file"),t("OutboundLink")],1),e._v(" inside the root\ndirectory "),t("code",[e._v("/")]),e._v(" of the archive.")]),e._v(" "),t("h2",{attrs:{id:"linux-containers-concept"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-containers-concept"}},[e._v("#")]),e._v(" Linux Containers Concept")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://en.wikipedia.org/wiki/List_of_Linux_containe",target:"_blank",rel:"noopener noreferrer"}},[e._v("Linux containers"),t("OutboundLink")],1),e._v(" are a\nmodern technology that packages the application and all its dependencies so the\napplications can run on any Linux system. Ionoid.io supports Linux containers\nby using the widely supported classic archive files format; this is motivated by\nthe fact that IoT and Edge devices should have a long life time, and by using\narchive files for application packages, Ionoid.io ensures archive apps will\ncontinue to work in the future, as all the necessary tools to process them are\nstandard open source tools.")]),e._v(" "),t("p",[e._v("At run-time when the archive file is "),t("a",{attrs:{href:"https://docs.ionoid.io/docs/deploy-iot-apps.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("deployed on devices"),t("OutboundLink")],1),e._v(", the "),t("a",{attrs:{href:"https://docs.ionoid.io/docs/iot-apps.html#app-yaml-format",target:"_blank",rel:"noopener noreferrer"}},[e._v("app YAML file"),t("OutboundLink")],1),e._v(" that is on the root\ndirectory "),t("code",[e._v("/")]),e._v(" of the archive will be used to define how the application will run.")]),e._v(" "),t("p",[e._v("Ionoid.io makes minimal use of Linux containers technologies by just using file\nsystem isolation, where each deployed application will have its own correspondig\ndirectory, see previous chapter "),t("a",{attrs:{href:"https://docs.ionoid.io/docs/iot-apps.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("IoT Apps"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"docker-buildx-archive-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-buildx-archive-apps"}},[e._v("#")]),e._v(" Docker buildx Archive Apps")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),t("OutboundLink")],1),e._v(" offers the necessary tooling to build and export\narchive apps. The following steps demonstrates on how to pull a\n"),t("a",{attrs:{href:"https://hub.docker.com/_/node",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js docker"),t("OutboundLink")],1),e._v(" image for "),t("code",[e._v("ARMv7")]),e._v(" and export\nit into an archive app, that is then deployed directly using "),t("a",{attrs:{href:"https://docs.ionoid.io/docs/deploy-iot-apps.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Ionoid.io\ndeployment"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"prerequisite"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prerequisite"}},[e._v("#")]),e._v(" Prerequisite")]),e._v(" "),t("Content",{attrs:{"page-key":e.getPageKey(e.$site.pages,"/docs/_extract-docker-image-requirements.html")}}),e._v(" "),t("h3",{attrs:{id:"steps-to-extract-and-export-docker-images-node-js-example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#steps-to-extract-and-export-docker-images-node-js-example"}},[e._v("#")]),e._v(" Steps to extract and export docker images: Node.js example")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("Run the following commands with "),t("code",[e._v("sudo")]),e._v(" whenever it is necessary.")])]),e._v(" "),t("ol",[t("li",[e._v("Pull "),t("a",{attrs:{href:"https://hub.docker.com/_/node?tab=tags&page=1&name=alpine",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js for ARMv7"),t("OutboundLink")],1),e._v(" image based on\n"),t("code",[e._v("Alpine Linux")]),e._v(":")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("docker pull --platform linux/arm/v7 node:current-alpine\n")])])]),t("p",[e._v("The "),t("code",[e._v("docker images")]),e._v(" command should return the line of the "),t("code",[e._v("node")]),e._v(" repository:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("REPOSITORY    TAG               IMAGE ID        CREATED         SIZE\nnode          current-alpine    013139600021    19 hours ago    107MB\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("Extract the docker image layers, the following command will extract the\nimage layers into the directory "),t("code",[e._v("node-armv7/")]),e._v(":")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("docker save node "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" undocker --no-whiteouts -d -i -o node-armv7 node:current-alpine\n")])])]),t("p",[e._v("Where "),t("code",[e._v("node:current-alpine")]),e._v(" is the "),t("code",[e._v("repository:tag")]),e._v(" pair of desired image.")]),e._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[e._v("Create the "),t("code",[e._v("app.yaml")]),e._v(" file inside the "),t("code",[e._v("node-armv7")]),e._v(" directory with the\nfollowing content:")])]),e._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("armv7\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" v14.10.0\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("apps")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("node-armv7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" /usr/local/bin/node "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("version\n")])])]),t("p",[e._v("Where "),t("code",[e._v("/usr/local/bin/node")]),e._v(" is the node executable binary path inside the\n"),t("code",[e._v("node-armv7")]),e._v(" directory (make sure it is the correct path).")]),e._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[e._v("Tar compress application and produce the app archive from parent directory of\n"),t("code",[e._v("node-armv7")]),e._v(":")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" --numeric-owner --create --auto-compress "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n        --xattrs --file node-v14.10.0-armv7.tar.gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n        --directory node-armv7 --transform"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'s,^./,,'")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n")])])]),t("p",[e._v("The final size of app archive in this case is:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("node-v14.10.0-armv7.tar.gz  36M\n")])])]),t("p",[e._v("A copy of the built node.js archive can be found "),t("a",{attrs:{href:"https://raw.githubusercontent.com/ionoid/docs-examples/master/archives/node-14.10.1-alpine3.11-armv7.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),t("OutboundLink")],1)]),e._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[t("p",[e._v("Upload and deploy your application by following documentation at\n"),t("a",{attrs:{href:"https://docs.ionoid.io/docs/deploy-iot-apps.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("deploy IoT apps documentation"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[e._v("Later you are able to update your application using the "),t("a",{attrs:{href:"https://docs.ionoid.io/docs/deploy-iot-apps.html#_2-delta-updates-workflow",target:"_blank",rel:"noopener noreferrer"}},[e._v("Delta Update\nWorkflow"),t("OutboundLink")],1)])])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("Example of a delta update of node.js from v14.10 to v14.10.1")]),e._v(" "),t("p",[e._v("Taking a real example of "),t("a",{attrs:{href:"https://hub.docker.com/_/node?tab=tags&page=1&name=alpine",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js for Alpine"),t("OutboundLink")],1),e._v(" and using docker\ncontainer tags: "),t("a",{attrs:{href:"https://hub.docker.com/layers/node/library/node/14.10-alpine3.11/images/sha256-3d1bdb8c2d026003273dd229d6f1ac2252be4d6fb5676a15f987f7e761e254d2?context=explore",target:"_blank",rel:"noopener noreferrer"}},[e._v("node:14.10-alpine3.11"),t("OutboundLink")],1),e._v("\nand "),t("a",{attrs:{href:"https://hub.docker.com/layers/node/library/node/14.10.1-alpine3.11/images/sha256-fb2e7a5e9511fba4ab2ebcd165d7fbeec0e032e03685b93ce8869787d26f4ea9?context=explore",target:"_blank",rel:"noopener noreferrer"}},[e._v("node:14.10.1-alpine3.11"),t("OutboundLink")],1),e._v("\nfor "),t("code",[e._v("ARMv7")]),e._v(" platform, the following performs an update of node.js but also\ndependencies and Alpine packages:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Lines starting with `#` are comments.")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Pull the containers, here we assume you build yours.")]),e._v("\ndocker pull --platform linux/arm/v7 node:14.10-alpine3.11\ndocker pull --platform linux/arm/v7 node:14.10.1-alpine3.11\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Check the images")]),e._v("\ndocker images\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Save the container image to a directory")]),e._v("\ndocker save node "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" undocker --no-whiteouts -d -i "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n        -o node-14.10-alpine3.11-armv7 node:14.10-alpine3.11\ndocker save node "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" undocker --no-whiteouts -d -i "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n        -o node-14.10.1-alpine3.11-armv7 node:14.10.1-alpine3.11\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Add the app.yaml file")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" app.yaml node-14.10-alpine3.11-armv7/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" app.yaml node-14.10.1-alpine3.11-armv7/\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Tar compress directories to an App archive")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" --numeric-owner --create --auto-compress --xattrs --xattrs-include"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("* "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n        --file node-14.10-alpine3.11-armv7.tar.gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n        --directory node-14.10-alpine3.11-armv7/ --transform"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'s,^./,,'")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" --numeric-owner --create --auto-compress --xattrs --xattrs-include"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("* "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n        --file node-14.10.1-alpine3.11-armv7.tar.gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n        --directory node-14.10.1-alpine3.11-armv7/ --transform"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'s,^./,,'")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Check app archive size")]),e._v("\nnode-14.10-alpine3.11-armv7.tar.gz 37M\nnode-14.10.1-alpine3.11-armv7.tar.gz 38M\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Produce a delta update of Node from 14.10 to 14.10-1")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# (this will update dependecies and some modules too)")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Add -f to force ovewrite previous app.xdelta if any.")]),e._v("\nxdelta3 -e -s node-14.10-alpine3.11-armv7.tar.gz node-14.10.1-alpine3.11-armv7.tar.gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n        app.xdelta\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Check app.xdelta size")]),e._v("\napp.xdelta 11M\n")])])]),t("p",[e._v("The produced "),t("code",[e._v("app.xdelta")]),e._v(" size is "),t("code",[e._v("11M")]),e._v(" which represents "),t("code",[e._v("70%")]),e._v(" reduction of the\nupdate size. Here we performed an "),t("code",[e._v("Node.js")]),e._v(", its modules and other packages\nupdate.")]),e._v(" "),t("p",[e._v("Usually an incremental update of only some files of the app will result in few\nkilobytes or even less.")]),e._v(" "),t("p",[e._v("To update your application from a specified version to any other version\ndirectly, please follow the "),t("a",{attrs:{href:"https://docs.ionoid.io/docs/deploy-iot-apps.html#_2-delta-updates-workflow",target:"_blank",rel:"noopener noreferrer"}},[e._v("Delta Update\nworkflow"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("h2",{attrs:{id:"the-mkiot-make-iot-tool"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-mkiot-make-iot-tool"}},[e._v("#")]),e._v(" The "),t("code",[e._v("mkiot")]),e._v(" (make IoT) Tool")]),e._v(" "),t("p",[e._v("To generate the app archive we can use "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot",target:"_blank",rel:"noopener noreferrer"}},[e._v("mkiot"),t("OutboundLink")],1),e._v(",\nwhich uses "),t("a",{attrs:{href:"https://wiki.debian.org/Debootstrap",target:"_blank",rel:"noopener noreferrer"}},[e._v("debootstrap"),t("OutboundLink")],1),e._v(" and other tools to\nbuild an app archive.")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("mkiot")]),e._v(" tool allows us to:")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Install a Linux distribution file system that will be used as a build image\nfor the application,")])]),e._v(" "),t("li",[t("p",[e._v("Build the application,")])]),e._v(" "),t("li",[t("p",[e._v("Copy application files and other dependencies into image,")])]),e._v(" "),t("li",[t("p",[e._v("Copy the "),t("a",{attrs:{href:"https://docs.ionoid.io/docs/iot-apps.html#app-yaml-format",target:"_blank",rel:"noopener noreferrer"}},[e._v("app.yaml file"),t("OutboundLink")],1),e._v(" into the image,")])]),e._v(" "),t("li",[t("p",[e._v("Generate an artifact from the image.")])])]),e._v(" "),t("p",[e._v("Please follow "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot#install",target:"_blank",rel:"noopener noreferrer"}},[e._v("mkiot installation"),t("OutboundLink")],1),e._v("\ndocumentation and install it on your Linux working station.")]),e._v(" "),t("h3",{attrs:{id:"linux-iot-build-environments"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-iot-build-environments"}},[e._v("#")]),e._v(" Linux IoT Build Environments")]),e._v(" "),t("p",[e._v("This section describes how to generate IoT and Edge apps build environments\nusing "),t("code",[e._v("mkiot")]),e._v(".")]),e._v(" "),t("p",[e._v("Building an IoT app can somehow be challening, usually we suggest to start with\na full build enviroment, then try to optimize later using "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot#multi-stage-builds",target:"_blank",rel:"noopener noreferrer"}},[e._v("mkiot multi-stage\nbuilds"),t("OutboundLink")],1),e._v(" to reduce the final\nimage size.")]),e._v(" "),t("p",[e._v("Ionoid.io supports "),t("a",{attrs:{href:"https://www.debian.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("Debian"),t("OutboundLink")],1),e._v(" and "),t("a",{attrs:{href:"https://alpinelinux.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Alpine Linux"),t("OutboundLink")],1),e._v(" images, more will be added soon.")]),e._v(" "),t("p",[e._v("Assuming "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/",target:"_blank",rel:"noopener noreferrer"}},[e._v("mkiot"),t("OutboundLink")],1),e._v(" is installed and ready, let's\nstart building our environments and apps.")]),e._v(" "),t("h4",{attrs:{id:"debian-environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debian-environment"}},[e._v("#")]),e._v(" Debian Environment")]),e._v(" "),t("p",[e._v("From the "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot#examples",target:"_blank",rel:"noopener noreferrer"}},[e._v("mkiot examples"),t("OutboundLink")],1),e._v(" we use the\n"),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/debian/buildspec.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Debian minimal buildspec.yaml"),t("OutboundLink")],1),e._v(":")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/debian/buildspec.yaml\n")])])]),t("p",[e._v("This will generate an artifact in "),t("code",[e._v("tar archive format")]),e._v(" at:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("./output/artifacts/debian-buster_armhf_2020-06-11.tar\n")])])]),t("p",[e._v("If you want to generate a Debian environment with development tools and\npackages, you can use the "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/devtools/debian/buster/buildspec-devtools-armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Debian devtools buildspec.yaml"),t("OutboundLink")],1),e._v("\nexample and edit it to add more commands or packages to be installed in\n"),t("code",[e._v("commands")]),e._v(":")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/devtools/debian/buster/buildspec-devtools-armhf.yaml\n")])])]),t("p",[e._v("This will generate an artifact in "),t("code",[e._v("tar archive format")]),e._v(" at:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("./output/artifacts/devtools_debian-buster_armhf.tar\n")])])]),t("h4",{attrs:{id:"alpine-environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alpine-environment"}},[e._v("#")]),e._v(" Alpine Environment")]),e._v(" "),t("p",[e._v("Under development, will be added soon.")]),e._v(" "),t("h3",{attrs:{id:"node-js-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-js-apps"}},[e._v("#")]),e._v(" Node.js Apps")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://nodejs.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js"),t("OutboundLink")],1),e._v(" is an open source, cross-platform, JavaScript\nruntime environment that executes JavaScript code outside a web browser. See\n"),t("a",{attrs:{href:"https://en.wikipedia.org/wiki/Node.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("Wikipedia"),t("OutboundLink")],1),e._v(" for more details.")]),e._v(" "),t("p",[e._v("We can build a Node.js environment using one of the supported distributions as a\nbase image for the file system.")]),e._v(" "),t("p",[e._v("The following examples demonstrate how to use "),t("code",[e._v("mkiot")]),e._v(" to build a Node.js\nenvironment that is targeted to "),t("code",[e._v("ARMv7")]),e._v(" architectures, as Node.js only supports\n"),t("code",[e._v("ARMv7")]),e._v(" and above, for further documentation please see "),t("a",{attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[e._v("the Node.js Download\npage"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h4",{attrs:{id:"node-js-debian-based-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-js-debian-based-image"}},[e._v("#")]),e._v(" Node.js Debian Based Image")]),e._v(" "),t("p",[e._v("To have a Node.js environment from "),t("a",{attrs:{href:"https://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions-enterprise-linux-fedora-and-snap-packages",target:"_blank",rel:"noopener noreferrer"}},[e._v("upstream Node.js\npackage"),t("OutboundLink")],1),e._v("\non a minimal Debian file system, run "),t("code",[e._v("mkiot")]),e._v(" with the following "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/node.js/debian/buster/buildspec-node.js-minimal-debian-armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js minimal\nDebian buildspec.yaml"),t("OutboundLink")],1),e._v(":")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/node.js/debian/buster/buildspec-node.js-minimal-debian-armhf.yaml\n")])])]),t("p",[e._v("To have Node.js installed as a binary on a Debian file system, with extra\npackages like "),t("code",[e._v("devtools")]),e._v(" , "),t("code",[e._v("build essential")]),e._v(" or "),t("code",[e._v("yarn")]),e._v(", run "),t("code",[e._v("mkiot")]),e._v(" build with\nthe following "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/node.js/14/buster/buildspec-node.js-devtools-debian-armv7l.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js devtools Debian buildspec.yaml"),t("OutboundLink")],1),e._v(":")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/node.js/14/buster/buildspec-node.js-devtools-debian-armv7l.yaml\n")])])]),t("p",[e._v("Produced artifacts will be inside "),t("code",[e._v("./output/artifacts/")]),e._v(" in the current working directory.")]),e._v(" "),t("p",[e._v("To change the environment in order to update which packages or denpendecies\nshould be installed or removed, please copy and edit the "),t("code",[e._v("buildspec.yaml")]),e._v(" files.\nMake sure to copy in "),t("code",[e._v("script")]),e._v(" file that is used during build to the right\nlocation too, according to "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot#build-spec-commands-documentation",target:"_blank",rel:"noopener noreferrer"}},[e._v("mkiot script command"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h4",{attrs:{id:"node-js-alpine-based-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-js-alpine-based-image"}},[e._v("#")]),e._v(" Node.js Alpine Based Image")]),e._v(" "),t("p",[e._v("To have a Node.js environment from upsteam Alpine Linux, run "),t("code",[e._v("mkiot")]),e._v(" with the\nfollowing "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/node.js/alpine/buildspec-node.js_minimal_alpine_armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js minimal Alpine Linux buildspec.yaml"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/node.js/alpine/buildspec-node.js_minimal_alpine_armhf.yaml\n")])])]),t("p",[e._v("To have Node.js installed with some development tools to build npm packages,\nrun "),t("code",[e._v("mkiot")]),e._v(" build with the following "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/node.js/alpine/buildspec-node.js_build-base_alpine_armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js build-base Alpine buildspec.yaml"),t("OutboundLink")],1),e._v(":")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/node.js/alpine/buildspec-node.js_build-base_alpine_armhf.yaml\n")])])]),t("p",[e._v("Produced artifacts will be inside "),t("code",[e._v("./output/artifacts/")]),e._v(" in the current working\ndirectory.")]),e._v(" "),t("p",[e._v("To change the environment in order to update which packages or denpendecies\nshould be installed or removed, please copy and edit the "),t("code",[e._v("buildspec.yaml")]),e._v(" files.\nMake sure to copy in "),t("code",[e._v("script")]),e._v(" file that is used during build to the right\nlocation too, according to "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot#build-spec-commands-documentation",target:"_blank",rel:"noopener noreferrer"}},[e._v("mkiot script command"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"node-js-apps-examples"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-js-apps-examples"}},[e._v("#")]),e._v(" Node.js Apps Examples")]),e._v(" "),t("h4",{attrs:{id:"node-js-debian-based-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-js-debian-based-apps"}},[e._v("#")]),e._v(" Node.js Debian based apps")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Hello-world app can be built using:")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/apps/hello-world/node.js/hello-world.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("hello-world.js app"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/apps/hello-world/node.js/app.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("app.yaml file"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://github.com/ionoid/mkiot/tree/master/examples/apps/hello-world/node.js/debian/buster",target:"_blank",rel:"noopener noreferrer"}},[e._v("hello world buildspec files"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[e._v("In "),t("code",[e._v("buildspec.yaml")]),e._v(" file, we add to the "),t("code",[e._v("artifacts")]),e._v(" block the "),t("code",[e._v("files")]),e._v(" block\nto copy the "),t("code",[e._v("app.yaml")]),e._v(" and the app python file to the image:")]),e._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[e._v("   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("files")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# copy app.yaml to root artifact /app.yaml")]),e._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" app.yaml /app.yaml\n\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# copy my application")]),e._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("world.js  /usr/bin/hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("world.js\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Then build this example from "),t("code",[e._v("mkiot")]),e._v(" source:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" examples/apps/hello-world/node.js/\n   "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build debian/buster/hello-world_node-14.0_minimal_debian_armhf.yaml\n")])])])]),e._v(" "),t("li",[t("p",[e._v("This will generate the final artifact inside "),t("code",[e._v("./output/artifact/")]),e._v(".")])])])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://nodered.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node-RED"),t("OutboundLink")],1),e._v(" - Low-code programming for event-driven\napplications")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Node-RED is a programming tool for wiring together hardware devices, APIs\nand online services in new and interesting ways.")])]),e._v(" "),t("li",[t("p",[e._v("Node-RED artifacts can be built using the following "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/tree/master/examples/apps/node-red",target:"_blank",rel:"noopener noreferrer"}},[e._v("build Node-RED"),t("OutboundLink")],1),e._v("\ndocumentation.")])])])]),e._v(" "),t("li",[t("p",[e._v("More applications will be added soon.")])])]),e._v(" "),t("h4",{attrs:{id:"node-js-alpine-based-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-js-alpine-based-apps"}},[e._v("#")]),e._v(" Node.js Alpine based apps")]),e._v(" "),t("ul",[t("li",[e._v("More applications will be added soon.")])]),e._v(" "),t("h3",{attrs:{id:"python-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#python-apps"}},[e._v("#")]),e._v(" Python Apps")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.python.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python"),t("OutboundLink")],1),e._v(" is an interpreted, high-level, general-purpose\nprogramming language. See "),t("a",{attrs:{href:"https://en.wikipedia.org/wiki/Python_(programming_language)",target:"_blank",rel:"noopener noreferrer"}},[e._v("Wikipedia"),t("OutboundLink")],1),e._v(" for more details.")]),e._v(" "),t("h4",{attrs:{id:"python-debian-based-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#python-debian-based-image"}},[e._v("#")]),e._v(" Python Debian Based Image")]),e._v(" "),t("p",[e._v("The following examples demonstrate how to use "),t("code",[e._v("mkiot")]),e._v(" to build a Python\nenvironment that is targeted to "),t("code",[e._v("ARM")]),e._v(" architectures.")]),e._v(" "),t("p",[e._v("To have a "),t("code",[e._v("python2")]),e._v(" environment on minimal Debian, run "),t("code",[e._v("mkiot")]),e._v(" build with the\n"),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/python/debian/buster/buildspec-python2-minimal-debian-armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python2 on minimal Debian buildspec.yaml"),t("OutboundLink")],1),e._v("\nfile:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/python/debian/buster/buildspec-python2-minimal-debian-armhf.yaml\n")])])]),t("p",[e._v("To have a "),t("code",[e._v("python3")]),e._v(" environment on minimal Debian, run "),t("code",[e._v("mkiot")]),e._v(" build with the\n"),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/python/debian/buster/buildspec-python3-minimal-debian-armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python3 on minimal Debian buildspec.yaml"),t("OutboundLink")],1),e._v("\nfile:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/python/debian/buster/buildspec-python3-minimal-debian-armhf.yaml\n")])])]),t("p",[e._v("To have a "),t("code",[e._v("python3")]),e._v(" environment on Debian with some development packages, run\n"),t("code",[e._v("mkiot")]),e._v(" build with the "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/python/debian/buster/buildspec-python3-devtools-debian-armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python3 on devtools Debian buildspec.yaml"),t("OutboundLink")],1),e._v("\nfile:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/python/debian/buster/buildspec-python3-devtools-debian-armhf.yaml\n")])])]),t("h4",{attrs:{id:"python-alpine-based-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#python-alpine-based-image"}},[e._v("#")]),e._v(" Python Alpine Based Image")]),e._v(" "),t("p",[e._v("The following examples demonstrate how to use "),t("code",[e._v("mkiot")]),e._v(" to build a Python\nenvironment based on Alpine Linux that is targeted to "),t("code",[e._v("ARM")]),e._v(" architectures.")]),e._v(" "),t("p",[e._v("To have a "),t("code",[e._v("python2")]),e._v(" environment on minimal Alpine Linux, run "),t("code",[e._v("mkiot")]),e._v(" build with\nthe "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/python/debian/buster/buildspec-python2-minimal-debian-armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python2 on minimal Debian buildspec.yaml"),t("OutboundLink")],1),e._v(" file:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/python/debian/buster/buildspec-python2-minimal-debian-armhf.yaml\n")])])]),t("p",[e._v("To have a "),t("code",[e._v("python3")]),e._v(" environment on minimal Debian, run "),t("code",[e._v("mkiot")]),e._v(" build with the\n"),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/python/debian/buster/buildspec-python3-minimal-debian-armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python3 on minimal Debian buildspec.yaml"),t("OutboundLink")],1),e._v("\nfile:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build examples/python/debian/buster/buildspec-python3-minimal-debian-armhf.yaml\n")])])]),t("p",[e._v("To have a "),t("code",[e._v("python3")]),e._v(" environment on Debian with some development packages, run\n"),t("code",[e._v("mkiot")]),e._v(" build with the "),t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/python/debian/buster/buildspec-python3-devtools-debian-armhf.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python3 on devtools Debian buildspec.yaml"),t("OutboundLink")],1),e._v("\nfile:")]),e._v(" "),t("h3",{attrs:{id:"python-apps-examples"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#python-apps-examples"}},[e._v("#")]),e._v(" Python Apps Examples")]),e._v(" "),t("h4",{attrs:{id:"python-debian-based-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#python-debian-based-app"}},[e._v("#")]),e._v(" Python Debian based app")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Hello-world app can be built using:")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/apps/hello-world/python/hello-world.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("hello-world.py app"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://github.com/ionoid/mkiot/blob/master/examples/apps/hello-world/python/app.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("app.yaml file"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://github.com/ionoid/mkiot/tree/master/examples/apps/hello-world/python/debian/buster",target:"_blank",rel:"noopener noreferrer"}},[e._v("hello world buildspec files"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[e._v("In "),t("code",[e._v("buildspec.yaml")]),e._v(" file, we add to the "),t("code",[e._v("artifacts")]),e._v(" block the "),t("code",[e._v("files")]),e._v(" block\nto copy the "),t("code",[e._v("app.yaml")]),e._v(" and the app python file to the image:")]),e._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[e._v("   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("files")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# copy app.yaml to root artifact /app.yaml")]),e._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" app.yaml /app.yaml\n\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# copy my application")]),e._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("world.py  /usr/bin/hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("world.py\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Then build this example from "),t("code",[e._v("mkiot")]),e._v(" source:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" examples/apps/hello-world/python/\n   "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" mkiot build debian/buster/hello-world_python3_minimal_debian_armhf.yaml\n")])])])]),e._v(" "),t("li",[t("p",[e._v("This will generate the final artifact inside "),t("code",[e._v("./output/artifact/")]),e._v(".")])])])]),e._v(" "),t("li",[t("p",[e._v("Tensor flow app")])])]),e._v(" "),t("h4",{attrs:{id:"python-alpine-based-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#python-alpine-based-app"}},[e._v("#")]),e._v(" Python Alpine based app")]),e._v(" "),t("p",[e._v("Will be added soon.")]),e._v(" "),t("Content",{attrs:{"page-key":e.getPageKey(e.$site.pages,"/docs/_have-questions.html")}})],1)}),[],!1,null,null,null);a.default=o.exports}}]);